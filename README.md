# pd2dsy

Utility for converting Pure Data (Vanilla) patches to ready-to-compile Daisy projects.

## General Overview

The goal of this project is to be able to run a command like this:

```
./pd2dsy --board="Pod" mypatch.pd
```

And get a .bin file ready to be programmed onto the Daisy.

There are a few pieces to this:

* HVCC - heavy compiler, a generator for creating portable source code based on Pure Data vanilla patches
* Daisy Interface handling - The controls and features available on the daisy platform need to be accessible from a pure data patch (buttons, knobs, leds, etc.)
* libdaisy template-based code generation - a script for populating a functional daisy program with the hvcc generated code, and generating the initialization and control/feedback for PD parameters
* compilation - a distributable copy of the arm toolchain and scripts for building the code without installing extra tools.

The HVCC output has been tested on the daisy, with manual source code modification, to control some oscillators with a pair of knobs (on the Daisy Pod).

an intiial cpp template exists in the util folder, along with submodules for the libraries needed.

## Current state

the pd2dsy script is currently written in python, and can be run as:

`python pd2dsy.py pdfile.pd`

This currently only runs the HVCC command and creates a new folder with the output source code.

## Next steps

0. Add a functional example demonstrating audio/control usage with hvcc and libdaisy.
1. Get initial audio-only examples generated by the pd2dsy script. (This mostly consist of pasting some functions into the template).
2. Define an interface (attributes in pd, maybe) that can be used to interface with the generator for connecting to knobs, GPIO, etc.
3. Implement the interface into the generator to be able to parse these attributes from the heavy output. (This may be tricky without actually changing the HVCC code).
4. Double check licensing requirements, etc. and bundle a pre-compiled binaries for the arm toolchain into the project for built-in compilation
5. Add a GUI? (Web app / built in tester, similar to OWL platform?)

## Considerations

### Interface between pd2dsy and Pure Data

Since HVCC acts as a middle man here, this could end up requiring some modification of hvcc to either output additional data we need (if we cannot get it from the existing platform), or handle specific puredata attributes in certain ways.

### OWL

The OWL platform seems to have a massive number of patches, and a built-in tester on their web app. While not necessary, we should consider building in compatibility with those patches as it would provide a massive library of patches ready to be run on the daisy platform. 

The nice thing is the OWL's control set could be mapped to the Daisy Patch, Petal, and Field (the pod only has two knobs). 

### Pure Data extensions

From what I've seen so far, the HVCC library essentially reimplements all of the vanilla pd objects. So extensions would likely have to added to the hvcc tool and not necessarily this script.

