#define SAMPLE_RATE 48000.f

//#include "daisy_boards.h"
#include "Heavy_saw_test.hpp"
#include "../../libdaisy/src/daisy_seed.h"

// GENERATE INCLUDES START
// GENERATE INCLUDES END

using namespace daisy;

//DSY_BOARD hardware;
DaisySeed seed;

Heavy_saw_test hv(SAMPLE_RATE);

int num_params;


// GENERATE GLOBALS START
// GENERATE GLOBALS END

void audiocallback(float *in, float *out, size_t size)
{
    // GENERATE AUDIOCALLBACK START
    for (int i = 0; i < num_params; i++)
    {
	HvParameterInfo info;
	hv.getParameterInfo(i, &info);
	hv.sendFloatToReceiver(info.hash, .5f);
    }
    hv.processInlineInterleaved(in, out, size);	
    // GENERATE AUDIOCALLBACK END
}

int main(void)
{
    // GENERATE PREINIT START
    // GENERATE PREINIT END
    seed.Configure();
    seed.Init();

    num_params = hv.getParameterInfo(0, NULL);
    
    seed.StartAudio(audiocallback);
    // GENERATE POSTINIT START
    // GENERATE POSTINIT END    
    
    for(;;)
    {
        // GENERATE INFINITELOOP START
        // GENERATE INFINITELOOP END
    }
}
